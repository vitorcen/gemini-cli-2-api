
> gemini-cli-api-tests@0.1.0 test
> vitest basic.test.ts


 RUN  v3.2.4 /mnt/c/Work/mcp/gemini-cli/test

ğŸš€ Starting a2a-server...
âŒ Failed to connect to server: fetch failed
No test files found, exiting with code 1

filter: basic.test.ts
include: **/*.test.ts
exclude:  **/node_modules/**, **/dist/**, **/cypress/**, **/.{idea,git,cache,output,temp}/**, **/{karma,rollup,webpack,vite,vitest,jest,ava,babel,nyc,cypress,tsup,build,eslint,prettier}.config.*


â¯â¯â¯â¯â¯â¯ Unhandled Error â¯â¯â¯â¯â¯â¯â¯
TypeError: fetch failed
 â¯ node:internal/deps/undici/undici:13510:13
 â¯ process.processTicksAndRejections node:internal/process/task_queues:105:5
 â¯ Object.setup setup.ts:40:28
     39| 
     40|   // ç­‰å¾…æœåŠ¡å™¨å¯åŠ¨
     41|   await new Promise((resolve) => setTimeout(resolve, 3000));
       |               ^
     42| 
     43|   // éªŒè¯æœåŠ¡å™¨å¯ç”¨
 â¯ TestProject._initializeGlobalSetup node_modules/vitest/dist/chunks/cli-api.BkDphVBG.js:7074:21
 â¯ Vitest.initializeGlobalSetup node_modules/vitest/dist/chunks/cli-api.BkDphVBG.js:9724:35
 â¯ node_modules/vitest/dist/chunks/cli-api.BkDphVBG.js:9636:5
 â¯ Vitest.runFiles node_modules/vitest/dist/chunks/cli-api.BkDphVBG.js:9666:10
 â¯ Vitest.start node_modules/vitest/dist/chunks/cli-api.BkDphVBG.js:9554:18
 â¯ startVitest node_modules/vitest/dist/chunks/cli-api.BkDphVBG.js:10510:8
 â¯ start node_modules/vitest/dist/chunks/cac.Cb-PYCCB.js:1412:15

Caused by: Error: connect ECONNREFUSED 127.0.0.1:41242
 â¯ TCPConnectWrap.afterConnect [as oncomplete] node:net:1637:16

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯
Serialized Error: { errno: -111, code: 'ECONNREFUSED', syscall: 'connect', address: '127.0.0.1', port: 41242 }



ğŸ›‘ Stopping a2a-server...
âœ… Server stopped
